/**
 * 前端API配置文件
 * 
 * 功能描述:
 * - 集中管理所有API相关的配置参数
 * - 定义后端服务器地址和WebSocket连接地址
 * - 配置所有API端点的路径
 * - 设置数据刷新间隔和请求超时等参数
 * 
 * 配置说明:
 * - BASE_URL: 后端API的基础URL地址
 * - WS_URL: WebSocket连接地址（预留，暂未使用）
 * - ENDPOINTS: 所有API端点的路径映射
 * - REFRESH_INTERVAL: 各类数据的自动刷新间隔（毫秒）
 * - REQUEST: HTTP请求的配置参数
 * 
 * 文件路径: frontend/js/config.js
 */

const API_CONFIG = {
    // ============================================================
    // 🌐 后端服务器地址配置
    // ============================================================
    
    /**
     * 后端API服务器的基础URL
     * 所有API请求都将发送到此地址
     * 
     * 注意: 
     * - 开发环境通常使用 localhost
     * - 生产环境应替换为实际的服务器域名或IP
     * - 需要确保协议（http/https）与服务器配置一致
     */
    BASE_URL: 'http://localhost:3000',
    
    /**
     * WebSocket服务器地址
     * 用于实时数据推送（预留接口，当前版本未使用）
     * 
     * 说明: 
     * - ws:// 表示非加密WebSocket连接
     * - wss:// 表示加密WebSocket连接（生产环境推荐）
     */
    WS_URL: 'ws://localhost:3000/ws',
    
    // ============================================================
    // 📡 API端点配置
    // ============================================================
    
    /**
     * API端点路径映射表
     * 集中管理所有API接口的相对路径
     * 使用时与BASE_URL拼接得到完整URL
     */
    ENDPOINTS: {
        // ========== 机器人相关端点 ==========
        
        /**
         * 获取机器人状态
         * 方法: GET
         * 完整URL: BASE_URL + '/api/robot/status'
         */
        ROBOT_STATUS: '/api/robot/status',
        
        /**
         * 发送控制指令
         * 方法: POST
         * 完整URL: BASE_URL + '/api/robot/control'
         * 支持command（方向控制）和action（作业控制）两种参数
         */
        ROBOT_CONTROL: '/api/robot/control',
        
        // ========== 传感器相关端点 ==========
        
        /**
         * 获取传感器数据
         * 方法: GET
         * 完整URL: BASE_URL + '/api/sensors'
         * 返回土壤湿度、土壤温度、光照、空气湿度等数据
         */
        SENSORS: '/api/sensors',
        
        // ========== 任务管理端点 ==========
        
        /**
         * 获取任务列表
         * 方法: GET
         * 完整URL: BASE_URL + '/api/tasks'
         * 返回所有任务及其状态和进度
         */
        TASKS: '/api/tasks',
        
        /**
         * 获取作业统计数据
         * 方法: GET
         * 完整URL: BASE_URL + '/api/statistics'
         * 返回已完成面积、总面积、完成进度等统计信息
         */
        STATISTICS: '/api/statistics',
        
        // ========== 系统相关端点 ==========
        
        /**
         * 健康检查
         * 方法: GET
         * 完整URL: BASE_URL + '/api/health'
         * 用于检测后端服务是否正常运行
         */
        HEALTH: '/api/health'
    },
    
    // ============================================================
    // ⏱️ 数据刷新间隔配置
    // ============================================================
    
    /**
     * 各类数据的自动刷新间隔（单位: 毫秒）
     * 前端会按照设定的间隔定期请求数据，保持界面数据实时更新
     */
    REFRESH_INTERVAL: {
        /**
         * 机器人状态刷新间隔
         * 500ms = 0.5秒刷新一次
         * 原因: 实时监控需要高频率刷新
         */
        ROBOT_STATUS: 500,
        
        /**
         * 传感器数据刷新间隔
         * 500ms = 0.5秒刷新一次
         * 原因: 实时监控需要高频率刷新
         */
        SENSORS: 500,
        
        /**
         * 任务列表刷新间隔
         * 500ms = 0.5秒刷新一次
         * 原因: 实时监控需要高频率刷新
         */
        TASKS: 500,
        
        /**
         * 统计数据刷新间隔
         * 500ms = 0.5秒刷新一次
         * 原因: 实时监控需要高频率刷新
         */
        STATISTICS: 500
    },
    
    // ============================================================
    // 🔧 请求配置
    // ============================================================
    
    /**
     * HTTP请求的配置参数
     */
    REQUEST: {
        /**
         * 请求超时时间（单位: 毫秒）
         * 5000ms = 5秒
         * 超过此时间未收到响应将自动取消请求并抛出错误
         */
        TIMEOUT: 5000,
        
        /**
         * 请求重试次数
         * 3 = 失败后最多重试3次
         * 注意: 当前版本尚未实现重试机制，此配置为预留
         */
        RETRY_COUNT: 3
    }
};

// ============================================================
// 全局导出
// ============================================================

/**
 * 将配置对象导出到window对象
 * 使得其他JavaScript模块可以通过window.API_CONFIG访问配置
 * 方便在浏览器控制台进行调试和测试
 */
window.API_CONFIG = API_CONFIG;

/**
 * 冻结配置对象
 * 防止在运行时意外修改配置
 * Object.freeze()方法会冻结对象，使其不可增删改属性
 * 
 * 注意: 
 * - 如果需要动态修改配置（如切换服务器地址），需要先解冻或修改此配置
 * - 在生产环境中，建议保持冻结以确保配置的稳定性
 */
Object.freeze(API_CONFIG);
