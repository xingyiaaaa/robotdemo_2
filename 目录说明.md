# 📂 robotdemo13 项目目录说明

---

## 🎯 项目信息

**项目名称**: 农业机器人控制系统  
**版本**: v2.0  
**创建时间**: 2026-02-03  
**来源**: 从 robotdemo12 迁移优化而来

---

## 📁 根目录文件说明

| 文件名 | 类型 | 说明 | 重要性 |
|--------|------|------|--------|
| `README.md` | 文档 | 项目概览和快速启动指南 | ⭐⭐⭐ |
| `综合文档.md` | 文档 | **所有使用指南合集**（必读） | ⭐⭐⭐ |
| `迁移完成报告.md` | 文档 | 项目迁移详细说明 | ⭐ |
| `快速启动指南.md` | 文档 | 3步快速上手 | ⭐⭐ |
| `package.json` | 配置 | 硬件依赖（MQTT + SerialPort） | ⭐⭐ |
| `package-lock.json` | 配置 | 依赖锁定文件 | ⭐ |
| `test-api.sh` | 脚本 | Linux/Mac API测试脚本 | ⭐⭐ |
| `test-api.ps1` | 脚本 | Windows PowerShell测试脚本 | ⭐⭐ |

---

## 📂 目录说明

### 📂 `backend/` - 后端项目 ⭐⭐⭐

**功能**: Node.js + Express 后端服务

**包含**:
```
backend/
├── server.js              # 服务器入口文件
├── package.json           # 后端依赖配置
├── routes/
│   └── robot.js          # API路由定义
├── controllers/
│   └── robotController.js # 请求处理控制器
└── data/
    ├── mockData.js       # 模拟数据源 (🔌 硬件槽位)
    └── dataSource.js     # MQTT真实数据源
```

**启动方式**:
```bash
cd backend
npm install    # 首次运行需要
npm start      # 启动服务器
```

**端口**: 3000  
**地址**: http://localhost:3000

---

### 📂 `frontend/` - 前端项目 ⭐⭐⭐

**功能**: HTML + CSS + JavaScript 前端界面

**包含**:
```
frontend/
├── index.html           # 主页面
├── debug.html           # 调试页面
├── test.html            # 测试页面
├── simple-test.html     # 简单测试页面
├── css/
│   └── styles.css       # 主样式文件
└── js/
    ├── config.js        # API配置（后端地址、刷新间隔）
    ├── api.js           # API接口封装
    ├── app.js           # 应用主逻辑
    ├── chart.js         # 图表服务
    ├── alert.js         # 告警服务
    └── video.js         # 视频服务
```

**启动方式**:
```bash
cd frontend
python -m http.server 8080
# 或使用 Live Server 扩展
```

**端口**: 8080  
**地址**: http://localhost:8080

---

### 📂 `docs/` - 开发文档 ⭐⭐

**功能**: 详细的开发文档和API规范

**包含**:
```
docs/
├── README.md               # 文档索引
├── POSTMAN使用指南.md      # API测试完整教程
├── 前端开发指南.md         # 前端架构和调试
├── 后端开发指南.md         # 后端API和部署
└── MQTT接口文档.md         # 硬件对接规范
```

**适用对象**:
- 前端开发者 → `前端开发指南.md`
- 后端开发者 → `后端开发指南.md`
- 测试人员 → `POSTMAN使用指南.md`
- 硬件工程师 → `MQTT接口文档.md`

---

### 📂 `pmtest/` - Postman测试文件 ⭐⭐⭐

**功能**: Postman API测试集合和环境配置

**包含**:
```
pmtest/
├── 农业机器人API测试集合.postman_collection.json
└── 农业机器人-本地环境.postman_environment.json
```

**使用方法**:
1. 打开 Postman
2. Import → 选择 `农业机器人API测试集合.postman_collection.json`
3. Import → 选择 `农业机器人-本地环境.postman_environment.json`
4. 选择环境 "农业机器人 - 本地开发环境"
5. 开始测试所有API

**包含的测试**:
- 健康检查
- 机器人状态（获取/更新）
- 传感器数据（获取/更新）
- 控制指令（方向/作业）
- 任务管理（CRUD操作）
- 统计数据（获取/更新）

---

## 🎯 快速使用指南

### 第一次使用项目

1. **阅读项目概览**
   ```bash
   cat README.md
   ```

2. **查看综合文档**
   ```bash
   cat 综合文档.md
   # 这个文档包含所有使用指南！
   ```

3. **安装依赖**
   ```bash
   # 根目录
   npm install
   
   # 后端
   cd backend
   npm install
   ```

4. **启动项目**
   ```bash
   # 终端1: 启动后端
   cd backend
   npm start
   
   # 终端2: 启动前端
   cd frontend
   python -m http.server 8080
   ```

5. **测试API**
   - 导入 `pmtest/` 中的Postman文件
   - 或运行 `./test-api.sh` (Linux/Mac) 或 `./test-api.ps1` (Windows)

---

### 前端开发

1. **修改代码**: 编辑 `frontend/js/` 中的文件
2. **配置API**: 修改 `frontend/js/config.js`
3. **调试**: 使用 `frontend/debug.html`
4. **查看文档**: `docs/前端开发指南.md`

---

### 后端开发

1. **修改路由**: 编辑 `backend/routes/robot.js`
2. **修改控制器**: 编辑 `backend/controllers/robotController.js`
3. **修改数据源**: 编辑 `backend/data/mockData.js`
4. **查看文档**: `docs/后端开发指南.md`

---

### API测试

**方法1: Postman (推荐)**
- 导入 `pmtest/` 中的测试集合
- 参考 `综合文档.md` 第二部分

**方法2: 测试脚本**
```bash
# Linux/Mac
./test-api.sh

# Windows
./test-api.ps1
```

**方法3: curl命令**
```bash
# 获取机器人状态
curl http://localhost:3000/api/robot/status

# 更新传感器数据
curl -X POST http://localhost:3000/api/sensors \
  -H "Content-Type: application/json" \
  -d '{"soilHumidity": 80}'
```

---

### 硬件对接

1. **查看接口规范**: `docs/MQTT接口文档.md`
2. **修改数据源**: 替换 `backend/data/mockData.js`
3. **使用MQTT**: 参考 `backend/data/dataSource.js`

---

## 📚 文档优先级

### ⭐⭐⭐ 必读文档
1. `README.md` - 项目概览
2. `综合文档.md` - 所有使用指南合集
3. `pmtest/` - Postman测试文件

### ⭐⭐ 推荐阅读
1. `快速启动指南.md` - 快速上手
2. `docs/POSTMAN使用指南.md` - API测试详解
3. 测试脚本 (`test-api.sh`, `test-api.ps1`)

### ⭐ 按需查阅
1. `迁移完成报告.md` - 了解项目来源
2. `docs/前端开发指南.md` - 前端开发
3. `docs/后端开发指南.md` - 后端开发
4. `docs/MQTT接口文档.md` - 硬件对接

---

## 🔍 常见问题

### Q1: 从哪里开始？
**A**: 阅读 `README.md`，然后查看 `综合文档.md` 第一部分

### Q2: 如何测试API？
**A**: 导入 `pmtest/` 中的Postman文件，或运行测试脚本

### Q3: 如何修改后端？
**A**: 查看 `docs/后端开发指南.md`，修改 `backend/` 中的文件

### Q4: 如何对接硬件？
**A**: 查看 `docs/MQTT接口文档.md`，修改 `backend/data/mockData.js`

### Q5: 文档太多怎么办？
**A**: 优先看 `综合文档.md`，这一个文档包含了大部分内容

---

## 🎯 项目特点

### ✅ 完整性
- 前后端完整实现
- 12个API接口
- 完整的测试集合

### ✅ 易用性
- 详细的文档
- Postman测试现成可用
- 测试脚本自动化

### ✅ 可维护性
- 清晰的目录结构
- 模块化代码设计
- 详细的代码注释

### ✅ 可扩展性
- 硬件接口预留
- MQTT协议支持
- 数据源可替换

---

## 📞 获取帮助

### 查找文档
1. **快速开始** → `综合文档.md` 第一部分
2. **API测试** → `综合文档.md` 第二部分
3. **项目分析** → `综合文档.md` 第三部分
4. **详细开发** → `docs/` 目录中的文档

### 目录导航
- `backend/` - 后端代码
- `frontend/` - 前端代码
- `docs/` - 开发文档
- `pmtest/` - Postman测试

---

## 🎉 开始使用

现在你已经了解了项目结构，可以开始使用了！

**推荐步骤**:
1. 阅读 `综合文档.md`
2. 启动后端和前端
3. 导入Postman测试集合
4. 开始开发/测试

---

**祝你使用愉快！** 🚀

---

**文档版本**: v1.0  
**最后更新**: 2026-02-03
